{% extends "base.html" %}
{% block content %}

  <!-- page header -->
  <div class="h2-responsive text-center font-weight-bolder card-header"> 
    Dashboard
  </div>

  <!-- employee information display section-->
  <div class="container-fluid" style="width: 70%;">
    <div class="row">
      <div class="col-7">
        <div class="card-deck">
          <div class="card mb-4 border-light" style="height: 1000px;">
            <div class="card-dashboard">
              <div class="card-body">

                <!-- Welcome message to user -->
                <div class="text-left black-text">
                  <h4 style="font-size: 16px;">
                    Hello <strong>{{ employ.email }}</strong>, 
                    your information with the company is shown here.
                  </h4>
                  <p align="justify" style="font-size: 14px" class="grey-text">
                    Your service is subject to the corporate policy of this organization
                    and you are expected to abide by all rules & regulations guiding our 
                    employees. 
                  </p>
                </div>

                <!-- Employee information table -->
                <div class="row">
                  <table class="table table-bordered table-item">
                    <thead>
                      <tr>  
                        <th scope="col"></th>
                        <th class="table-items black-text">
                          <strong>Department:</strong>
                        </th>
                        <th class="table-items">
                          {{ employ.department }}
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <th scope="row"></th>
                        <th class="table-items black-text">
                          <strong>First Name:</strong>
                        </th>
                        <th class="table-items">
                          {{ employ.first_name }}
                        </th>
                      </tr>
                      <tr>
                      <tr>
                        <th scope="row"></th>
                        <th class="table-items black-text">
                          <strong>Last Name:</strong>
                        </th>
                        <th class="table-items">
                          {{ employ.last_name }}
                        </th>
                      </tr>
                      <th scope="row"></th>
                      <th class="table-items black-text">
                        <strong>Email: </strong>
                      </th>
                      <th class="table-items">
                        {{ employ.email }}
                      </th>
                      </tr>
                      <tr>
                        <th scope="row"></th>
                        <th class="table-items black-text">
                          <strong>Mobile:</strong>
                        </th>
                        <th class="table-items">
                          {{ employ.mobile }}
                        </th>
                      </tr>
                      <tr>
                        <th scope="row"></th>
                        <th class="table-items black-text">
                          <strong>Home Address:</strong>
                        </th>
                        <th class="table-items">
                          {{ employ.address }}
                        </th>
                      </tr>
                      <tr>
                        <th scope="row"></th>
                        <th class="table-items black-text">
                          <strong>Gender:</strong>
                        </th>
                        <th class="table-items">
                          {{ employ.gender }}
                        </th>
                      </tr>
                      <tr>
                        <th scope="row"></th>
                        <th class="table-items black-text">
                          <strong>Employment Date:</strong>
                        </th>
                        <th class="table-items">
                          {{ employ.employment_date }}
                        </th>
                      </tr>
                      <tr>
                        <th scope="row"></th>
                        <th class="table-items black-text">
                          <strong>Primary Duties</strong>
                        </th>
                        <th class="table-items">
                          {{ employ.duties }}
                        </th>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <!-- Employee information table ends -->

                <!-- flash message -->
                <section class="container">
                  {% with messages = get_flashed_messages() %}
                      {% if messages %}
                          {% for message in messages %}
                              <div class="row">
                                  <h6 class="red-text mx-auto">
                                    {{ message }}
                                  </h6>
                              </div>
                          {% endfor %}
                      {% endif %}
                  {% endwith %}
              </section>

                <!-- form for sending message to hr office -->
                <div class="card text-center mb-3" style="width: 580px; height: 250px;">
                  <div class="card-body">
                    <h6 class="card-title black-text"><i class="fas fa-pen-fancy"></i>
                      Contact HR office for any complain or concern
                    </h6>
                    <form class="comment-form needs-validation" action="{{ url_for('emp_message', email=employ.email) }}" 
                      method="post" novalidate>

                        <div class="md-form">
                          <textarea id="message" name="message" class="md-textarea form-control" rows="4" 
                            placeholder="Message" minlength="5" maxlength="50" required></textarea>
                        </div>
            
                        <button type="submit" class="btn btn-block btn-mdb-color text-capitalize">
                          <span class="white-text">
                            Submit
                          </span>
                        </button>
                      </div>
                    </form>
                  </div>
                </div>
                <!-- form for sending message to hr office ends -->
              </div>
            </div>
          </div>
        </div>

      <!-- Right panel widget section-->
      <div class="col-5">
        <div class="card border-light" style="width: 100%; height: 800px;">
          <ul class="list-group list-group-flush">

            <a href="#">
              <li class="list-group-item hvr-overline-reveal" style="height: 120px; padding-top: 22px;">
                <h6 class="black-text" style="display: inline; padding-left: 30px;">
                  <strong>Quarterly Attendance</strong>
                </h6>
                <i class="far fa-user text-center circle-icon"></i>
                <h5 style="display: block; padding-left: 90px;" class="red-text">
                 <strong>0.0%</strong>
                </h5>
                <h6 style="display: block; padding-left: 90px; color: rgb(103, 64, 194);">
                  Top employees have over 90% attendance
                </h6>
              </li>
            </a>

            <a href="https://scholar.google.com/scholar?q=articles+on+employee+productivity&hl=en&as_sdt=0&as_vis=1&oi=scholart" 
              target="_blank">
              <li class="list-group-item hvr-overline-reveal" style="height: 120px; padding-top: 35px;">
                <h6 class="black-text" style="display: inline; padding-left: 30px; padding-bottom: 0px; padding-top: 20px;">
                  <strong>Industry Articles</strong></h6>
                <i class="far fa-sticky-note text-center circle-icon"></i>
                <h6 style="display: block; padding-left: 90px; color: rgb(103, 64, 194);">
                 Curated Articles on latest Industry trends
                </h6>
              </li>
            </a>

            <a href="{{ url_for('help_desk') }}">
              <li class="list-group-item hvr-overline-reveal" style="height: 120px; padding-top: 35px;">
                <h6 class="black-text" style="display: inline; padding-left: 30px; padding-bottom: 0px; padding-top: 20px;">
                  <strong>Need Assistance?</strong></h6>
                <i class="far fa-comment-dots text-center circle-icon"></i>
                <h6 style="display: block; padding-left: 90px; color: rgb(103, 64, 194);">
                  Reach out to us, we are happy to help
                </h6>
              </li>
            </a>

            <a href="{{ url_for('change_password') }}">
              <li class="list-group-item hvr-overline-reveal" style="height: 120px; padding-top: 28px;">
                <h6 class="black-text" style="display: inline; padding-left: 30px; padding-bottom: 0px; padding-top: 20px;">
                  <strong>Change your password</strong></h6>
                <i class="fas fa-ban text-center circle-icon"></i>
                <h6 style="display: block; padding-left: 90px; color: rgb(103, 64, 194);">
                  Prevent unauthorized access to your information & privacy
                </h6>
              </li>
            </a>
            
              <!-- Notice from hr office section -->
              <div class="accordion md-accordion btn-mdb-color" id="accordionEx1" role="tablist" aria-multiselectable="true">
                  <div class="card-header" role="tab" id="headingTwo1">
                    <a class="collapsed" data-toggle="collapse" data-parent="#accordionEx1" href="#collapseTwo1"
                      aria-expanded="false" aria-controls="collapseTwo1">
                      <h6 class="mb-0 white-text text-center">
                       Notifications
                      </h6>
                    </a>
                  </div>
                  {% if notices %}
                    {% for notice in notices %}
                  <div id="collapseTwo1" class="collapse" role="tabpanel" aria-labelledby="headingTwo1"
                    data-parent="#accordionEx1">
                    <div class="card-body">
                      <div>
                        <h6><strong>From: </strong><em>{{ notice.sender }}</em> | 
                          <strong>Date: </strong>{{ notice.date }}
                        </h6>
                        <h6 class="text-center">{{ notice.subject }}</h6>
                      </div>
                      <p align="justify">
                        {{ notice.message }}
                      </p>                      
                    </div>
                  </div>
              </div>
                    {% endfor %}
                  {% endif %}
            </li>

          </ul>
        </div>
      </div>
      <!-- Right panel widget section ends -->
    </div>
  </div>

{% endblock %}
